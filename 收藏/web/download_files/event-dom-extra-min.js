define("event-dom-extra",["event-dom-base","util","ua","util","dom","feature","dom"],function(e){var t,n,a,i,o,r,c,u,s=e("event-dom-base"),E=e("util"),f=e("ua"),N=e("util"),_=e("dom"),d=e("feature"),T=e("dom");return t=function(e){var t={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229};return t.isTextModifyingKeyEvent=function(e){var n=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||n>=t.F1&&n<=t.F12)return!1;switch(n){case t.ALT:case t.CAPS_LOCK:case t.CONTEXT_MENU:case t.CTRL:case t.DOWN:case t.END:case t.ESC:case t.HOME:case t.INSERT:case t.LEFT:case t.MAC_FF_META:case t.META:case t.NUMLOCK:case t.NUM_CENTER:case t.PAGE_DOWN:case t.PAGE_UP:case t.PAUSE:case t.PRINT_SCREEN:case t.RIGHT:case t.SHIFT:case t.UP:case t.WIN_KEY:case t.WIN_KEY_RIGHT:return!1;default:return!0}},t.isCharacterKey=function(e){if(e>=t.ZERO&&e<=t.NINE)return!0;if(e>=t.NUM_ZERO&&e<=t.NUM_MULTIPLY)return!0;if(e>=t.A&&e<=t.Z)return!0;if(-1!==window.navigation.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case t.SPACE:case t.QUESTION_MARK:case t.NUM_PLUS:case t.NUM_MINUS:case t.NUM_PERIOD:case t.NUM_DIVISION:case t.SEMICOLON:case t.DASH:case t.EQUALS:case t.COMMA:case t.PERIOD:case t.SLASH:case t.APOSTROPHE:case t.SINGLE_QUOTE:case t.OPEN_SQUARE_BRACKET:case t.BACKSLASH:case t.CLOSE_SQUARE_BRACKET:return!0;default:return!1}},e=t}(),n=function(e){var n=s,a=t;return n.KeyCode=a,e=n}(),a=function(e){var t=n,a=t.Special,i=E,o=f;return o.ie||i.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(e){function n(n){var a=n.target;return t.fire(a,e.name)}var o=i.guid("attaches_"+i.now()+"_");a[e.name]={setup:function(){var t=this.ownerDocument||this;o in t||(t[o]=0),t[o]+=1,1===t[o]&&t.addEventListener(e.fix,n,!0)},tearDown:function(){var t=this.ownerDocument||this;t[o]-=1,0===t[o]&&t.removeEventListener(e.fix,n,!0)}}}),e}(),i=function(e){var t,a,i,o,r=N,c=n,u=_,s=f,E=d,T=c.Special,l=window,m=l.document,S="__ks_replace_history__",h=s.ieMode,U="hashchange";if(!E.isHashChangeSupported()){var M=50,v="<html><head><title>"+(m&&m.title||"")+" - {hash}</title>{head}</head><body>{hash}</body></html>";c.REPLACE_HISTORY=S;var A=function(){var e=location.href.match(/#.+$/);return e&&e[0]||"#"},O=function(){c.fireHandler(l,U,{newURL:location.href,oldURL:i+o}),o=A()},I=function(e){return e.contentWindow.document};t=h&&8>h?function(e,t){var n=r.substitute(v,{hash:r.escapeHtml(e),head:u.isCustomDomain()?'<script>document.domain = "'+m.domain+'";</script>':""}),i=I(a);try{t?i.open("text/html","replace"):i.open(),i.write(n),i.close()}catch(o){}}:function(){O()};var p,R=function(){var e=A(),n=0;-1!==e.indexOf(S)&&(n=1,e=e.replace(S,""),location.hash=e),e!==o&&t(e,n),p=setTimeout(R,M)},C=function(){p||R()},L=function(){p&&clearTimeout(p),p=0};h&&8>h&&(C=function(){if(!a){var e=u.getEmptyIframeSrc();a=u.create("<iframe "+(e?'src="'+e+'"':"")+' style="display: none" height="0" width="0" tabindex="-1" title="empty"/>'),u.prepend(a,m.documentElement),c.add(a,"load",function(){c.remove(a,"load"),t(A()),c.add(a,"load",n),R()}),m.attachEvent("propertychange",function(e){e=e||window.event;try{"title"===e.propertyName&&(I(a).title=m.title+" - "+A())}catch(e){}});var n=function(){location.hash=r.trim(I(a).body.innerText),O()}}},L=function(){p&&clearTimeout(p),p=0,c.detach(a),u.remove(a),a=0}),T[U]={setup:function(){this===l&&(o=A(),i=location.href.replace(/#.+/,""),C())},tearDown:function(){this===l&&L()}}}return e}(),o=function(e){function t(e){var t=(e.nodeName||"").toLowerCase();return"textarea"===t?!0:"input"===t?"text"===e.type||"password"===e.type:!1}function a(e){if(_.hasData(e,U)){var t=_.data(e,U);clearTimeout(t),_.removeData(e,U)}}function i(e){_.removeData(e,h),a(e)}function o(e){a(e.target)}function r(e){var t=e.value,n=_.data(e,h);t!==n&&(N.fire(e,m),_.data(e,h,t))}function c(e){_.hasData(e,U)||_.data(e,U,setTimeout(function t(){r(e),_.data(e,U,setTimeout(t,M))},M))}function u(e){var t=e.target;"focus"===e.type&&_.data(t,h,t.value),c(t)}function s(e){E(e),N.on(e,"blur",o),N.on(e,"mousedown keyup keydown focus",u)}function E(e){i(e),N.detach(e,"blur",o),N.detach(e,"mousedown keyup keydown focus",u)}function f(e){var n=e.target;t(n)&&!n.__inputHandler&&(n.__inputHandler=1,N.on(n,"input",d))}var N=n,_=T,d=function(){},l=N.Special,m="input",S="event-dom/input",h=S+"/history",U=S+"/poll",M=50;return l.input={setup:function(){var e=this;t(e)?s(e):N.on(e,"focusin",f)},tearDown:function(){var e=this;t(e)?E(e):(N.remove(e,"focusin",f),_.query("textarea,input",e).each(function(e){e.__inputHandler&&(e.__inputHandler=0,N.remove(e,"input",d))}))}},e}(),r=function(e){var t=_,a=n,i=E,o=a.Special;return i.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(e){o[e.name]={typeFix:e.fix,handle:function(e,n,a){var i=e.currentTarget,o=e.relatedTarget;return!o||o!==i&&!t.contains(i,o)?[n.simpleNotify(e,a)]:void 0}}}),e}(),c=function(e){var t=n;return e=t}(),u=function(e){return e=c}()});