/*! portal-web - 2016-11-10 19:56:33 */
GH.run(function(){if("placeholder"in document.createElement("input"))$(":input, textarea").placeholder();else{$(":input, textarea").not("input[type='password']").placeholder();var e=$("input[type='password']").first(),i=$("<input type='type'/>");i.attr({name:"re"+e.attr("name"),id:"re"+e.attr("id")}).addClass("J_rePwd").val(e.attr("placeholder")),i.addClass(e.attr("class")+" J_rePwd").val(e.attr("placeholder")),e.after(i).hide(),i.show(),i.focus(function(){i.hide(),e.val("").show().focus()}),e.blur(function(){""==e.val()&&(i.show(),e.hide())})}$("input.form-input").keyup(function(e){return 13===e.keyCode&&$(this).closest("form").find("#J_Submit").trigger("click"),!1});var t={init:function(e,i){return e.find("input.form-input").focus(function(){var e=$(this);e.removeClass("error");var i=e.parent();i.find("label.cleanErrorMsg").remove()}),e.find(":checkbox").on("change",function(){var e=$(this);e.removeClass("error");var i=e.parent();i.find("label.cleanErrorMsg").remove()}),this.validate(e,i)},validate:function(e,i){var t=!1;if(i)for(var a in i)if(i.hasOwnProperty(a)){var r=e.find(a);if(!r.length)continue;var n=$.trim(r.val()),s=i[a];if(!s)continue;for(var o in s)if(s.hasOwnProperty(o)){var c=!1,d="";if(r.hasClass("error")){t=!0;break}if("function"==typeof s[o]){var l=s[o].call(r,n);l!==!0&&(c=!0,d=l)}else switch(o){case"required":(!n||"checkbox"===r.attr("type")&&!r.prop("checked"))&&(c=!0);break;case"mobile":/^1\d{10}$/.test(n)||""===n||(c=!0);break;case"password":/^([a-zA-Z0-9]|[~`!@#$%\^&\*\(\)_\+-=\{\}\]|\[:;\"'<>,\.\/\?]){6,16}$/.test(n)||(c=!0);break;case"chinese":/^[\u2E80-\uFE4F]+$/.test(n)||(c=!0);break;case"email":/^([a-z0-9_\.\-\+]+)@([\da-z\.\-]+)\.([a-z\.]{2,6})$/i.test(n)||""===n||(c=!0);break;case"chinesename":(""==n||n.length<2||n.length>32||!/^(([\u4E00-\u9FA5]+(?:·[\u4E00-\u9FA5])*){1,32})$/.test(n))&&(c=!0);break;case"chineseorenglishname":(""==n||n.length<2||n.length>32||!/^(([\u4E00-\u9FA5]+(?:·[\u4E00-\u9FA5])*){1,32}|[a-zA-Z ]{2,50})$/.test(n))&&(c=!0)}c&&(d||(d=s[o]),r.hasClass("error")||this.singleError(r,d),t=!0)}}return!t},singleError:function(e,i){e.addClass("error");var t=e.parent(),a=e.parent().find(".cleanErrorMsg");0!==a.length&&a.remove(),t.append("<label class='cleanErrorMsg "+e.attr("id")+"ErrorMsg animated-fast fadeInRight'>"+i+"</label>")}},a={init:function(e){var i=this;e.find("input.form-input").focus(function(){var e=$(this);e.addClass("focus"),e.removeClass("error");var i=e.parent();i.find("label.cleanErrorMsg").remove()}).blur(function(){var e=$(this);e.removeClass("focus")}),i.initSwitch()},initSwitch:function(){var e=$(".J_TabList")[0].offsetWidth/2;$(".J_DownloadTab").on("click",function(){$(this).prev().removeClass("main-current").addClass("main-normal").end().removeClass("download-normal").addClass("download-current"),$(".J_TabList").animate({"margin-left":-e+"px"},300)}),$(".J_MainTab").on("click",function(){$(this).next().removeClass("download-current").addClass("download-normal").end().removeClass("main-normal").addClass("main-current"),$(".J_TabList").animate({"margin-left":0},300)}),$(window).on("resize load",function(){$(".J_MainBox")[0].offsetTop<="116"?$(".J_footer").hide():$(".J_footer").show()})}};GH.dispatcher(".J_PartnersLogin",function(e){return{init:function(){var i=this,t=e.find("form:eq(0)");e.find("#J_Submit").click(function(){var e=$(this),a=e.text();return $GUB.isActive(e)&&i.checkValidity(t)&&($GUB.disable(e,"处理中..."),$.ajax({type:"post",dataType:"json",cache:!1,url:$(this).data("action-captcha"),data:t.serialize(),success:function(i){return i.hasError?($GM.smartAlert(i.message),void $GUB.enable(e,a)):void t.submit()}})),!1}),$(".J_Captcha").on("click",function(){i.sendCaptcha($(this))})},sendCaptcha:function(e){var i=$("#mobile").val();return i?/^1\d{10}$/.test(i)?void $GU.sendMobileMsg(e,{type:$("#smsTypeIpt").val(),mobileNo:i}):void t.singleError($("#mobile"),"格式不正确"):void t.singleError($("#mobile"),"请输入手机号码")},checkValidity:function(){var i=t.init(e.find("form:eq(0)"),{"#mobile":{required:"",mobile:"格式不正确"},"#captcha":{required:""}});return i}}}),GH.dispatcher(".J_PartnersBind",function(e){return{init:function(){var i=e.find("form:eq(0)");e.find("#J_Submit").click(function(){var e=$(this),t=e.text();return $GUB.isActive(e)&&($GUB.disable(e,"处理中..."),$.ajax({type:i.attr("method"),dataType:"json",cache:!1,url:i.attr("action"),data:i.serialize(),success:function(i){return i.hasError?($GM.smartAlert(i.message),void $GUB.enable(e,t)):($(".J_PageBind").hide(),$(".J_PageSuccess").show(),void $(".J_CountDown").countdown(function(){location.href=$(this).data("href")},5,"time"))}})),!1})}}}),GH.dispatcher(".J_RegAndBind",function(e){return{init:function(){var i=this,t=e.find("form:eq(0)");e.find("#J_Submit").click(function(){var e=$(this),a=e.text();return $GUB.isActive(e)&&i.checkValidity(t)&&($GUB.disable(e,"处理中..."),$.ajax({type:t.attr("method"),dataType:"json",cache:!1,url:t.attr("action"),data:t.serialize(),success:function(i){return i.hasError?($GM.smartAlert(i.message),void $GUB.enable(e,a)):($(".J_PageBind").hide(),$(".J_PageSuccess").show(),void $(".J_CountDown").countdown(function(){location.href=$(this).data("href")},5,"time"))}})),!1})},checkValidity:function(){var i=t.init(e.find("form:eq(0)"),{"#bindPwd":{required:"",password:"格式不正确"}});return i}}}),GH.dispatcher(".J_NewLogin",function(e){return{init:function(){var i=this,t=e.find("form:eq(0)");e.find(".J_Social").each(function(){var e=$(this);e.attr("href",e.attr("href")+"?target="+encodeURIComponent(location.href))}),e.find(".J_RefreshCaptcha").click(function(){return $(".J_Captcha").find("img").attr("src","/validcode/genimage/"+Math.floor(1e7*Math.random())),!1}),e.find(".J_ShowMoreLogin").on("click",function(){return $(".J_LoginList").toggle(),!1}),e.find("#J_LoginSubmit").click(function(){return t.find(".g-tips-box-error").hide(),t.find(".g-tips-box-succ").hide(),$GUB.isActive($(this))&&i.checkValidity(t)&&($GUB.disable($(this),"处理中..."),t.find("input[name='password']").val($().crypt({method:"md5",source:t.find("#password").val()})),t.submit()),!1}),e.find("input.form-input").keyup(function(i){return 13===i.keyCode&&e.find("#J_LoginSubmit").trigger("click"),!1}),a.init(t)},checkValidity:function(){var i=t.init(e.find("form:eq(0)"),{"#loginId":{required:""},"#password":{required:""},"#validCode":{required:""}});return i}}}),GH.dispatcher(".J_NewRegister",function(e){return{init:function(){var i=this,r=e.find("form:eq(0)");i.captchaType=$("#J_CaptchaName").val()||"imagetest","geetest"==i.captchaType&&$GU.geeTestCaptcha.init({errCallback:i.imageInit,context:i}),e.find("#J_Submit").click(function(){r.find(".g-tips-box-error").hide(),r.find(".g-tips-box-succ").hide();var e=$GUB.isActive($(this))&&i.checkValidity(r);return $(".userPwdErrorMsg").click(function(){$(this).hide(),$("#userPwd").focus()}),e&&($GUB.disable($(this),"处理中..."),r.submit()),!1}),e.find("#J_Next").click(function(){var e=$("#J_GeeTestValid").val(),a=$("#mobile").val(),n=$(".geetest_challenge").val(),s=$(".geetest_validate").val(),o=$(".geetest_seccode").val(),c=$("#validCode").val(),d=$(this);if("geetest"==i.captchaType)var l={"#mobile":{required:"",mobile:"格式不正确"},"#agreement":{required:"请勾选"}};else var l={"#mobile":{required:"",mobile:"格式不正确"},"#agreement":{required:"请勾选"},"#validCode":{required:"请输入验证码"}};var u=t.init(r,l);return"geetest"==i.captchaType&&"0"==e?void $GM.smartAlert("请进行滑动验证"):void(u?($GUB.disable(d,"处理中..."),$.ajax({type:"get",catche:!1,data:{mobile:a,geetest_challenge:n,geetest_validate:s,geetest_seccode:o,imgCaptcha:c,captchaType:i.captchaType},url:$GC.guahaoServer+"/json/white/register/mobile",success:function(e){e&&"1"==e.code?($("#mobile_alias").val(a),$("#J_FirstPart").slideUp(),$("#J_SecondPart").slideDown(),i.resend=0,$(".J_Captcha").click()):($GM.smartAlert(e.message),$GU.geeTestCaptcha.refresh()),$GUB.enable(d,"下一步")},error:function(){$GU.geeTestCaptcha.refresh(),$GUB.enable(d,"下一步")}})):$GM.smartAlert("请完善表单！"))}),$(".J_Captcha").on("click",function(){$(".g-tips-box-error").hide(),i.sendCaptcha($(this))}),a.init(r)},imageInit:function(){this.captchaType="image",$(".J_GeeTest").hide(),$(".J_ImageTest").show(),e.find(".J_RefreshCaptcha").click(function(){return $(this).find("img").attr("src","/validcode/genimage/"+Math.floor(1e7*Math.random())),!1})},sendCaptcha:function(e){var i=$("#mobile").val(),a=$(".geetest_challenge").val(),r=$(".geetest_validate").val(),n=$(".geetest_seccode").val(),s=$("#validCode").val(),o=this;return i?/^1\d{10}$/.test(i)?($GU.sendMobileMsg(e,{type:"REG_MOBILE",sendCode:s||123,mobileNo:i,param:{geetest_challenge:a,geetest_validate:r,geetest_seccode:n,resend:o.resend,imgCaptcha:s,captchaType:o.captchaType},endCallback:function(e,i){i&&i.hasError&&$GM.smartModal(null,{message:i.message,close:function(){window.location.reload()},callback:function(){window.location.reload()}})}}),void(o.resend=1)):void t.singleError($("#mobile"),"格式不正确"):void t.singleError($("#mobile"),"请输入手机号码")},checkValidity:function(){var i=t.init(e.find("form:eq(0)"),{"#userPwd":{required:"",password:"请输入6-16位数字及字符组成的密码"},"#smsCode":{required:""}});return i}}}),GH.dispatcher(".J_NewRegisterVerify",function(e){return{init:function(){var i=this,t=e.find("form:eq(0)");$(".J_SelSex,.J_selTxt,.J_selBar").children().click(function(){return $(".J_selBar").hasClass("down")?($(".J_SelOptions").hide(),$(".J_selBar").removeClass("down")):($(".J_SelOptions").show(),$(".J_selBar").addClass("down")),!1}),$(".J_SelOptions p").click(function(){return $(this).addClass("checked").siblings().removeClass("checked"),$('input[name="sex"]').val($(this).attr("val")),$(".J_SelOptions").hide(),$(".J_selBar").removeClass("down"),$(".J_selTxt").html($(this).find("span").html()),!1}),$(document).on("click",function(){$(".J_SelOptions").hide()}),e.find("#J_Submit").click(function(){if(4==$(".J_certType").val()){var e=$('input[name="age"]').val();if(0>e||e>120)return $GM.smartAlert("请将填写信息补充完整，检查年龄是否填写正确"),!1}return t.find(".g-tips-box-error").hide(),t.find(".g-tips-box-succ").hide(),$GUB.isActive($(this))&&i.checkValidity(t)&&($GUB.disable($(this),"处理中..."),t.submit()),!1}),e.find("input.form-input").keyup(function(i){return 13===i.keyCode&&e.find("#J_LoginSubmit").trigger("click"),!1}),a.init(t)},checkValidity:function(){if($(".J_IDType").length>0)var i=t.init(e.find("form:eq(0)"),{"#userName":{chinesename:""},"#certNo":{required:""}});else var i=t.init(e.find("form:eq(0)"),{"#userName":{chineseorenglishname:""},"#certNo":{required:""}});return i}}})},[GH.modules.crypt,GH.modules.placeholder]);