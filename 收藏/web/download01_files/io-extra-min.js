define("io-extra",["util","querystring","dom","io-base","util"],function(t){var e,r,n,o=t("util"),a=t("querystring"),i=t("dom"),c=t("io-base"),u=t("util");return e=function(t){function e(t){var e,r=m.guid("io-iframe"),n=f.getEmptyIframeSrc();return e=t.iframe=f.create("<iframe "+(n?' src="'+n+'" ':"")+' id="'+r+'" name="'+r+'" style="position:absolute;left:-9999px;top:-9999px;"/>'),f.prepend(e,y.body||y.documentElement),e}function r(t,e,r){var n,o,a,i=[];return m.each(t,function(t,c){for(n=m.isArray(t),n||(t=[t]),o=0;o<t.length;o++)a=y.createElement("input"),a.type="hidden",a.name=c+(n&&r?"[]":""),a.value=t[o],f.append(a,e),i.push(a)}),i}function n(t){f.remove(t)}function u(t){var e,r=this,o=r.form,a=r.io,i=t.type,c=a.iframe;if(c)if("abort"===i&&6===p.ie?setTimeout(function(){f.attr(o,r.attrs)},0):f.attr(o,r.attrs),n(this.fields),p.removeEvent(c,"load",r._callback),p.removeEvent(c,"error",r._callback),setTimeout(function(){f.remove(c)},b),a.iframe=null,"load"===i)try{e=c.contentWindow.document,e&&e.body&&(a.responseText=f.html(e.body),m.startsWith(a.responseText,"<?xml")&&(a.responseText=void 0)),a.responseXML=e&&e.XMLDocument?e.XMLDocument:e,e?a._ioReady(v,"success"):a._ioReady(g,"parser error")}catch(u){a._ioReady(g,"parser error")}else"error"===i&&a._ioReady(g,"error")}function s(t){this.io=t,this._callback=m.bind(u,this)}var m=o,d=a,f=i,l=c,p=l._util,y=document,v=200,g=500,b=30,h=m.clone(l.getConfig().converters.text);return h.json=function(t){return m.parseJson(m.unEscapeHtml(t))},l.setupConfig({converters:{iframe:h,text:{iframe:function(t){return t}},xml:{iframe:function(t){return t}}}}),m.augment(s,{send:function(){function t(){p.addEvent(o,"load",i._callback),p.addEvent(o,"error",i._callback),m.submit()}var n,o,a,i=this,c=i.io,u=c.config,s=u.data,m=f.get(u.form);i.attrs={target:f.attr(m,"target")||"",action:f.attr(m,"action")||"",encoding:f.attr(m,"encoding"),enctype:f.attr(m,"enctype"),method:f.attr(m,"method")},i.form=m,o=e(c),f.attr(m,{target:o.id,action:c._getUrlForSend(),method:"post",enctype:"multipart/form-data",encoding:"multipart/form-data"}),s&&(a=d.parse(s)),a&&(n=r(a,m,u.serializeArray)),i.fields=n,6===p.ie?setTimeout(t,0):t()},abort:function(){this._callback({type:"abort"})}}),l.setupTransport("iframe",s),t}(),r=function(t){var e=c,r=u;return r.mix(e,{upload:function(t,r,n,o,a){return"function"==typeof n&&(a=o,o=n,n=void 0),e({url:t,type:"post",dataType:a,form:r,data:n,complete:o})}}),t=e}(),n=function(t){return t=r}()});