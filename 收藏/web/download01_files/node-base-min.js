define("node-base",["util","dom"],function(t){var e,n,r,i,a=t("util"),o=t("dom");return e=function(t){function e(t,i,a){var o,l=this;if(t instanceof e&&1===arguments.length)return t.slice();if(!(l instanceof e))return e.all.apply(e,arguments);if(!t)return l;if("string"==typeof t){if(o=r.create(t,i,a),o.nodeType===u.DOCUMENT_FRAGMENT_NODE)return s.apply(this,p(o.childNodes)),l}else{if(n.isArray(t)||c(t))return s.apply(l,p(t)),l;o=t}return l[0]=o,l.length=1,l}var n=a,r=o,i=Array.prototype,l=i.slice,u=r.NodeType,s=i.push,p=n.makeArray,c=r.isDomNodeList;return e.prototype={constructor:e,isNode:!0,length:0,item:function(t){var n=this;return t=parseInt(t,10),"number"==typeof t&&!isNaN(t)&&t<n.length?new e(n[t]):null},add:function(t,n,r){"number"==typeof n&&(r=n,n=void 0);var a=e.all(t,n).getDOMNodes(),o=new e(this);if(void 0===r)s.apply(o,a);else{var l=[r,0];l.push.apply(l,a),i.splice.apply(o,l)}return o},slice:function(){return new e(l.apply(this,arguments))},getDOMNodes:function(){return l.call(this)},each:function(t,e){return n.each(this,function(n,r){return t.call(e||n,n,r,this)},this),this},map:function(t,e){return n.map(this,function(n,r){return t.call(e||n,n,r,this)},this)},getDOMNode:function(){return this[0]},end:function(){var t=this;return t.__parent||t},filter:function(t){return new e(r.filter(this,n.isString(t)?t:function(e,n,r){return t.call(e,e,n,r)}))},all:function(t){var n,r=this;return n=r.length>0?e.all(t,r):new e,n.__parent=r,n},one:function(t){var e=this,n=e.all(t),r=n.length?n.slice(0,1):null;return r&&(r.__parent=e),r}},e.prototype.find=e.prototype.all,e.fn=e.prototype,n.mix(e,{all:function(t,i){if("string"==typeof t&&(t=n.trim(t))&&t.length>=3&&n.startsWith(t,"<")&&n.endsWith(t,">")){var a;return i&&(i.getDOMNode&&(i=i[0]),i.nodeType||(a=i,i=arguments[2])),new e(t,a,i)}return new e(r.query(t,i))},one:function(t,n){var r=e.all(t,n);return r.length?r.slice(0,1):null}}),e.Dom=r,"undefined"!=typeof KISSY&&n.mix(KISSY,{all:e.all,one:e.one}),t=e}(),n=function(t){function n(t,e,n){n.unshift(e);var r=u[t].apply(u,n);return void 0===r?e:r}function r(t,e,n){n.unshift(e);var r=u[t].apply(u,n);return void 0===r?e:null===r?null:new s(r)}function i(t,e,r,i){return void 0!==i[r]||l.isObject(i[0])?n(t,e,i):(i.unshift(e),u[t].apply(u,i))}var l=a,u=o,s=e,p=s.prototype,c=l.makeArray,f=["nodeName","isCustomDomain","getEmptyIframeSrc","equals","contains","index","scrollTop","scrollLeft","height","width","innerHeight","innerWidth","outerHeight","outerWidth","addStyleSheet","appendTo","prependTo","insertBefore","before","after","insertAfter","test","hasClass","addClass","removeClass","replaceClass","toggleClass","removeAttr","hasAttr","hasProp","show","hide","toggle","scrollIntoView","remove","empty","removeData","hasData","unselectable","wrap","wrapAll","replaceWith","wrapInner","unwrap"],h=["getWindow","getDocument","first","last","parent","closest","next","prev","clone","siblings","contents","children"],d={attr:1,text:0,css:1,style:1,val:0,prop:1,offset:0,html:0,outerHTML:0,outerHtml:0,data:1};return l.each(f,function(t){p[t]=function(){var e=c(arguments);return n(t,this,e)}}),l.each(h,function(t){p[t]=function(){var e=c(arguments);return r(t,this,e)}}),l.each(d,function(t,e){p[e]=function(){var n=c(arguments);return i(e,this,t,n)}}),t}(),r=function(t){var n=a,r=o,i=e,l=i.prototype;return n.each(["append","prepend","before","after"],function(t){l[t]=function(e){var n=e,i=this;return"object"!=typeof n&&(n=r.create(n+"")),n&&r[t](n,i),i}}),n.each(["wrap","wrapAll","replaceWith","wrapInner"],function(t){var e=l[t];l[t]=function(t){var n=this;return"string"==typeof t&&(t=i.all(t,n[0].ownerDocument)),e.call(n,t)}}),t}(),i=function(t){var n=e;return t=n}()});