define("event-base",["util"],function(t){var n,r,e,o,i,u,a=t("util");return n=function(t){function n(t){if(t.indexOf(".")<0)return[t,""];var n=t.match(/([^.]+)?(\..+)?$/),r=n[1],e=[r],o=n[2];return o?(o=o.split(".").sort(),e.push(o.join("."))):e.push(""),e}var r,e,o=a;return t={splitAndRun:r=function(t,n){return o.isArray(t)?(o.each(t,n),void 0):(t=o.trim(t),-1===t.indexOf(" ")?n(t):o.each(t.split(/\s+/),n),void 0)},normalizeParam:function(t,r,e){var i=r||{};i="function"==typeof r?{fn:r,context:e}:o.merge(i);var u=n(t);return t=u[0],i.groups=u[1],i.type=t,i},batchForType:function(t,n){var e=o.makeArray(arguments),i=e[2+n];i&&o.isObject(i)?o.each(i,function(r,o){var i=[].concat(e);i.splice(0,2),i[n]=o,i[n+1]=r,t.apply(null,i)}):r(i,function(r){var o=[].concat(e);o.splice(0,2),o[n]=r,t.apply(null,o)})},fillGroupsForEvent:function(t,r){var o=n(t),i=o[1];i&&(i=e(i),r._ksGroups=i),r.type=o[0]},getGroupsRe:e=function(t){return new RegExp(t.split(".").join(".*\\.")+"(?:\\.|$)")}}}(),r=function(t){function n(t){this.config=t||{}}var r,e=a;return n.prototype={constructor:n,equals:function(t){var n=this;return!!e.reduce(n.keys,function(r,e){return r&&n.config[e]===t.config[e]},1)},simpleNotify:function(t,n){var r,e=this,o=e.config;return r=o.fn.call(o.context||n.currentTarget,t,o.data),o.once&&n.removeObserver(e),r},notifyInternal:function(t,n){var r=this.simpleNotify(t,n);return r===!1&&t.halt(),r},notify:function(t,n){var e=this,o=e.config,i=t._ksGroups;return!i||o.groups&&o.groups.match(i)?e.notifyInternal(t,n):r}},t=n}(),e=function(t){function n(t){var n=this;n.currentTarget=null,r.mix(n,t),n.reset()}var r=a;return n.prototype={constructor:n,hasObserver:function(){return!!this.observers.length},reset:function(){var t=this;t.observers=[]},removeObserver:function(t){var n,r=this,e=r.observers,o=e.length;for(n=0;o>n;n++)if(e[n]===t){e.splice(n,1);break}r.checkMemory()},checkMemory:function(){},findObserver:function(t){var n,r=this.observers;for(n=r.length-1;n>=0;--n)if(t.equals(r[n]))return n;return-1}},t=n}(),o=function(t){function n(){var t=this;t.timeStamp=i.now(),t.target=r,t.currentTarget=r}var r,e=function(){return!1},o=function(){return!0},i=a;return n.prototype={isEventObject:1,constructor:n,isDefaultPrevented:e,isPropagationStopped:e,isImmediatePropagationStopped:e,preventDefault:function(){this.isDefaultPrevented=o},stopPropagation:function(){this.isPropagationStopped=o},stopImmediatePropagation:function(){var t=this;t.isImmediatePropagationStopped=o,t.stopPropagation()},halt:function(t){var n=this;t?n.stopImmediatePropagation():n.stopPropagation(),n.preventDefault()}},t=n}(),i=function(t){var i=n,u=r,a=e;return t={Utils:i,Object:o,Observer:u,Observable:a}}(),u=function(t){return t=i}()});