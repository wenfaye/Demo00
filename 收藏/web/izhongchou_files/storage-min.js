KISSY.add("tbc/search-suggest/1.4.14/mods/storage",function(e,a,r,t){function o(e){return s||(o.superclass.constructor.call(this,e||{}),s=this,s.initialize()),s}var s;return o.ATTRS={src:{value:location.protocol+"//g.alicdn.com/tbc/search-suggest/1.3.7/storage.swf"},bridge:{value:null},hasInit:{value:!1}},KISSY.extend(o,a,{initialize:function(e){e=e||{};var a=this;try{a._addFlash(e.appendTo),a.hasInit=!0}catch(r){KISSY.log(r.message)}},_saveToArr:function(e,a){var r=this.lazyArr||[];r.push({func:e,args:a}),this.lazyArr=r},_addFlash:function(e){var a,r=this,t=document,o=t.createElement("div"),s=r.get("src"),i="";window.__StorageIsReady=function(){r.isLoaded=!0;var e=r.lazyArr;KISSY.each(e,function(e){e.func.apply(r,e.args)})},o.id="storagetool",o.style.height=0,o.style.overflow="hidden",i+='<object id="J_StorageObj" name="J_StorageObj" ',i+='classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="1" height="1" ',i+='codebase="'+location.protocol+'//fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab">',i+='<param name="movie" value="'+s+'" />',i+='<param name="allowScriptAccess" value="always" />',i+='<embed name="J_StorageEmbed" src="'+s+'" width="1" height="1" ',i+='allowScriptAccess="always" type="application/x-shockwave-flash" ',i+='pluginspage="'+location.protocol+'//www.adobe.com/go/getflashplayer">',i+="</embed></object>",e=e||t.body,e.appendChild(o),o.innerHTML=i,-1!==navigator.appVersion.indexOf("MSIE")?(o.style.zoom=1,o.style.filter="alpha(opacity=10)",a=window.J_StorageObj):(o.style.opacity=.1,a=t.J_StorageEmbed),r.set("bridge",a)},save:function(e,a,t){var o=this,s=o.get("bridge");if(!o.isLoaded)return void o._saveToArr(arguments.callee,arguments);try{return s.save(e,a),s.read(e)?r.parse(s.read(e)).length:(t&&t.onSuccess(a),0)}catch(i){t&&t.onFailure&&t.onFailure(i)}},read:function(e,a,r){var t,o=this,s=o.get("bridge");if(r=r||0,!o.isLoaded)return void o._saveToArr(arguments.callee,arguments);try{if(s.read)t=s.read(e),a&&a.onSuccess(t);else{if(200===r)return void(a&&a.onFailure&&a.onFailure());setTimeout(function(){o.read(e,a,r+1)},500)}return t}catch(i){a&&a.onFailure&&a.onFailure(i)}}}),o},{requires:["base","json"]});