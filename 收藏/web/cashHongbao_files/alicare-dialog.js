var AlicareDialog=function(e){function t(i){if(o[i])return o[i].exports;var n=o[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){e.exports=o(6)},function(e,t){"use strict";e.exports={HtmlToDom:function(e){var t=document.createElement("div");return t.innerHTML=e,t.children[0]},bindEvent:function(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent&&e.attachEvent("on"+t,o)},haltEvent:function(e){var t=e||window.event;t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble&&(t.cancelBubble=!0)},getScreenWidthAndHeight:function(){return{width:document.documentElement.clientWidth||document.body.clientWidth,height:document.documentElement.clientHeight||document.body.clientHeight}},computePosition:function(e){var t=e||window.event,o=t.pageX||t.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),i=t.pageY||t.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);return{pageX:o,pageY:i}},hasClass:function(e,t){return!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){if(this.hasClass(e,t)){var o=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(o," ")}},remove:function(e){e.parentNode.removeChild(e)}}},function(e,t){"use strict";function o(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function n(e){return"number"==typeof e}function r(e){return"object"===("undefined"==typeof e?"undefined":s(e))&&null!==e}function a(e){return void 0===e}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0,o.defaultMaxListeners=10,o.prototype.setMaxListeners=function(e){if(!n(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},o.prototype.emit=function(e){var t,o,n,s,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}if(o=this._events[e],a(o))return!1;if(i(o))switch(arguments.length){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),o.apply(this,s)}else if(r(o))for(s=Array.prototype.slice.call(arguments,1),c=o.slice(),n=c.length,l=0;l<n;l++)c[l].apply(this,s);return!0},o.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?o.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(e,t){function o(){this.removeListener(e,o),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return o.listener=t,this.on(e,o),this},o.prototype.removeListener=function(e,t){var o,n,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=this._events[e],a=o.length,n=-1,o===t||i(o.listener)&&o.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(o)){for(s=a;s-- >0;)if(o[s]===t||o[s].listener&&o[s].listener===t){n=s;break}if(n<0)return this;1===o.length?(o.length=0,delete this._events[e]):o.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},o.prototype.removeAllListeners=function(e){var t,o;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(o=this._events[e],i(o))this.removeListener(e,o);else if(o)for(;o.length;)this.removeListener(e,o[o.length-1]);return delete this._events[e],this},o.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},o.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},o.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"use strict";var o={},i="alicare_dialog";e.exports={sendLog:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],n=new Image,r="img_"+Math.random(),a=(new Date).getTime(),s=o.from||"unknown";e.ext=JSON.stringify(e.ext)||"";var l="https://gm.mmstat.com/ihelp.a21ib.8016006."+i+"."+e.d+"?cache="+a+"&ext="+e.ext+("&memberType="+o.memberType+"&from="+s+"&imsid="+o.imsid+"&autosend=1");window[r]=n,n.onload=n.onerror=function(){window[r]=null},t?n.setAttribute("src",l):setTimeout(function(){n.setAttribute("src",l)},500)},setLog:function(e){o=e}}},function(e,t,o){"use strict";var i=o(1);e.exports={frameDuration:20,opacityUnit:.1,positionUnit:20,defaultTimes:7,showDialog:function(e,t){var o=this,i=this.defaultTimes,n=.1,r=-80,a=1,s=12;e.parentNode.style.display="block",clearInterval(this.showDialogId);var l=n,c=r,f=Math.ceil(Math.abs(a-n)/i),d=Math.ceil(Math.abs(s-r)/i);this.showDialogId=setInterval(function(){l=l+f>a?a:l+f,c=c+d>s?s:c+d,e.style.opacity=l,e.style.right=c+"px",c>=s&&(clearInterval(o.showDialogId),"function"==typeof t&&t())},this.frameDuration)},closeDialog:function(e,t){var o=this,i=this.defaultTimes,n=1,r=12,a=.1,s=-80;clearInterval(this.closeDialogId);var l=n,c=r,f=Math.ceil(Math.abs(a-n)/i),d=Math.ceil(Math.abs(s-r)/i);this.closeDialogId=setInterval(function(){l=l-f<=a?a:l-f,c=c-d<=s?s:c-d,e.style.opacity=l,e.style.right=c+"px",c<=s&&(clearInterval(o.closeDialogId),e.parentNode.style.display="none","function"==typeof t&&t())},this.frameDuration)},changeEnvironment:function(e,t,o,n){var r=this;e.style.position="absolute",t.style.position="absolute";var a=i.getScreenWidthAndHeight(),s=o.getBoundingClientRect(),l=0,c=0,f=a.height-s.bottom,d=a.height-s.bottom+64;o.style.left?(e.style.left="0px",t.style.left="0px"):(e.style.right="0px",t.style.right="0px");var u=void 0;o.style.top?u="top":(u="bottom",d=-d-e.clientHeight,f=-f-t.clientHeight),e.style[u]=l+"px",t.style[u]=f+"px",this.attrChange(e,u,l,d,7,"toFast",function(){r.attrChange(t,u,f,c,5,"toSlow",function(){var o=["position","top","right","left","bottom"];r.clearAttrs(e,o),r.clearAttrs(t,o),"function"==typeof n&&n()})})},attrChange:function(e,t,o,i,n,r,a){var s=this,l=a||("function"===r?r:a);clearInterval(this.attrChangeId);var c=o,f=Math.ceil(Math.abs(i-o)/n),d=0;"toFast"===r?d=1:"toSlow"===r&&(d=-1),i<o&&(f=-f,d=-d),this.attrChangeId=setInterval(function(){c=c+f>=i&&i>o||c+f<=i&&i<o?i:c+f,f+=d,e.style[t]=c+"px",(c>=i&&i>o||c<=i&&i<o)&&(clearInterval(s.attrChangeId),"function"==typeof l&&l())},this.frameDuration)},clearAttrs:function(e,t){for(var o=0;o<t.length;o++)e.style[t[o]]=""}}},function(e,t){"use strict";e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var o=this[t];o[2]?e.push("@media "+o[2]+"{"+o[1]+"}"):e.push(o[1])}return e.join("")},e.i=function(t,o){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var r=this[n][0];"number"==typeof r&&(i[r]=!0)}for(n=0;n<t.length;n++){var a=t[n];"number"==typeof a[0]&&i[a[0]]||(o&&!a[2]?a[2]=o:o&&(a[2]="("+a[2]+") and ("+o+")"),e.push(a))}},e}},function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=(o(9),o(10)),r=o(13),a=o(3),s=function(){function e(t){var o=this;return i(this,e),this.config=t,n.getAlicareMiniConfig(t,window.location.href,function(e){if(0===e.status&&e.data){var t=e.data,i=t.viewType,n=t.recommendQuestions;switch(i){case"weak":o.config.type="weak";break;case"customized":o.config.type="customized";break;case"strong":default:n&&0!==n.length?(o.config.type="strong",o.config.recommendQuestions=n):o.config.type="weak"}o.config.bu=e.data.bu,o.config.color=e.data.color,o.__init()}else"invalid request page"===e.message&&console.log("尚未登记接入页面，如需登记，请联系 @瑶袂(xy88523@alibaba-inc.com) 同学。")})}return e.prototype.__init=function(){var e=this;return a.setLog({from:this.config.from,memberType:"",imsid:""}),this.ui=new r(this.config),this.ui.on("message",function(t){n.sendMessage(e.ui.dialog.element.getElementsByTagName("iframe")[0],t)}),this.ui},e.prototype.onRendered=function(e){var t=this;e&&"function"==typeof e&&setTimeout(function(){t.ui?e(t.ui):t.onRendered(e)},300)},e}();e.exports=s,window.alicareDialogAsyncInit&&window.alicareDialogAsyncInit(s)},function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=o(1),r=o(3);e.exports=function(){function e(t,o){var a=this;i(this,e),this.isDragReady=!1,this.hasDragged=!1;var s={x:0,y:0},l={x:0,y:0};n.bindEvent(t,"mousedown",function(e){var i=e||window.event,r=i.srcElement||i.target;if(r){n.haltEvent(i),a.isDragReady=!0;var c=t.querySelector(o);c&&(c.style.visibility="visible");var f=n.computePosition(i);s.x=f.pageX-t.offsetLeft,s.y=f.pageY-t.offsetTop,l.x=i.clientX,l.y=i.clientY}}),n.bindEvent(document,"mouseup",function(e){a.isDragReady=!1;var i=t.querySelector(o);i&&(i.style.visibility="hidden"),a.hasDragged&&(r.sendLog({d:"drag"}),setTimeout(function(){a.hasDragged=!1},60),t.style.cursor="")}),n.bindEvent(document,"mousemove",function(e){var o=e||window.event,i={x:o.clientX,y:o.clientY};if(!(l.x&&i.x&&Math.abs(l.x-i.x)<=1&&l.y&&i.y&&Math.abs(l.y-i.y)<=1)&&a.isDragReady){var r=n.getScreenWidthAndHeight(),c=n.computePosition(o),f={width:t.offsetWidth,height:t.offsetHeight},d=void 0,u=void 0,p=c.pageY-s.y,h=c.pageX-s.x;h>(r.width-f.width)/2?(h=r.width-f.width-h,u="right",t.style.left&&(t.style.left="")):(u="left",t.style.right&&(t.style.right="")),h<5&&(h=5),t.style[u]=h+"px",p>(r.height-f.height)/2?(p=r.height-f.height-p,d="bottom",t.style.top&&(t.style.top="")):(d="top",t.style.bottom&&(t.style.bottom="")),p<20&&(p=20),t.style[d]=p+"px",a.hasDragged=!0,t.style.cursor="move"}})}return e.prototype.wrapClickFunc=function(e){var t=this;return function(o){t.hasDragged||e(o)}},e}()},function(e,t){"use strict";function o(e,t){var o=document.createElement("script"),i=!1;o.src=e,o.async=!0;var n=t||s.error;"function"==typeof n&&(o.onerror=function(t){n({url:e,event:t})}),o.onload=o.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,o.onload=o.onreadystatechange=null,o&&o.parentNode&&o.parentNode.removeChild(o))},l||(l=document.getElementsByTagName("head")[0]),l.appendChild(o)}function i(e){return encodeURIComponent(e)}function n(e,t,n,r){var l=(e||"").indexOf("?")===-1?"?":"&",c=void 0,f=r||s.callbackName||"callback",d=f+"_json"+ ++a,u=t||{};for(c in u)u.hasOwnProperty(c)&&(l+=i(c)+"="+i(u[c])+"&");return window[d]=function(e){n(e);try{delete window[d]}catch(t){}window[d]=null},o(""+e+l+f+"="+d),d}function r(e){s=e}var a=0,s={},l=void 0;e.exports={get:n,init:r}},function(e,t){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),o=this,i=function(){},n=function(){return o.apply(this instanceof i?this:e||this,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,n.prototype=new i,n}),Array.prototype.filter||(Array.prototype.filter=function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),o=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=[],n=arguments.length>=2?arguments[1]:void 0,r=0;r<o;r++)if(r in t){var a=t[r];e.call(n,a,r,t)&&i.push(a)}return i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var o;if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return-1;var r=+t||0;if(Math.abs(r)===1/0&&(r=0),r>=n)return-1;for(o=Math.max(r>=0?r:n-Math.abs(r),0);o<n;){if(o in i&&i[o]===e)return o;o++}return-1}),"function"!=typeof Object.create&&(Object.create=function(){function e(){}var t=Object.prototype.hasOwnProperty;return function(i){if("object"!=("undefined"==typeof i?"undefined":o(i)))throw TypeError("Object prototype may only be an Object or null");e.prototype=i;var n=new e;if(e.prototype=null,arguments.length>1){var r=Object(arguments[1]);for(var a in r)t.call(r,a)&&(n[a]=r[a])}return n}}())},function(e,t,o){"use strict";var i=o(8);e.exports={sendMessage:function(e,t){e.contentWindow.postMessage(JSON.stringify({message:t,source:"alicare-dialog"}),"*")},getAlicareMiniConfig:function(e,t,o){var n=void 0;n=window.location.hostname.indexOf(".daily.")>-1?"//service.daily.taobao.net/support/alicare/alicareMiniConfig.do":"//service.taobao.com/support/alicare/alicareMiniConfig.do",i.get(n,{from:e.from,orderId:e.orderId,sourceURL:t},o)}}},function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=o(2),s=o(1);e.exports=function(e){function t(o,r){i(this,t);var a=n(this,e.call(this));return a.container=o,a.config=r,a.render(a.config.tpl),a}return r(t,e),t.prototype.render=function(e){if(!e)return void console.log("请在初始化 config 里，配置自定义模板！");var t=this.container;this.element=s.HtmlToDom(e),t.layout=this.element,t.element.insertBefore(this.element,t.dialog.element)},t}(a)},function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=o(2),s=o(1),l=o(17),c=o(3),f=o(4);e.exports=function(e){function t(o,r){i(this,t);var a=n(this,e.call(this));return a.element=s.HtmlToDom(l),a.container=o,a.iframe=a.element.getElementsByTagName("iframe")[0],a.dialog=a.element.querySelector(".alicare-dialog-wrapper"),a.iframe.frameBorder=0,a.config=r,window.location.hostname.indexOf(".daily.")>-1?a.iframeSrc="//service.daily.taobao.net/support/alicare/index.htm":a.iframeSrc="//service.taobao.com/support/alicare/index.htm",a.iframeSrc=a.iframeSrc+"?from="+encodeURI(r.from),r.orderId&&(a.iframeSrc=a.iframeSrc+"&orderId="+encodeURI(r.orderId)),a.iframeSrc=a.iframeSrc+"&bu="+r.bu,o.element.appendChild(a.element),a.__bindEvents(),a.__updatePositon(),a}return r(t,e),t.prototype.__updatePositon=function(){if(this.config.dialog&&this.config.dialog.offset){var e=this.config.dialog.offset.y;e&&e<0&&(this.element.style.bottom=-8+e+"px")}},t.prototype.__bindEvents=function(){var e=this,t=this.element.querySelector(".im-close");s.bindEvent(t,"click",this.container.draggable.wrapClickFunc(function(){e.hide(),c.sendLog({d:"close_dialog"}),e.emit("closeDialog")}))},t.prototype.show=function(e){this.iframe.src||(e?this.iframe.src=this.iframeSrc+"&question="+encodeURI(e):this.iframe.src=this.iframeSrc),this.dialogShow=!0,f.showDialog(this.dialog)},t.prototype.hide=function(e){this.dialogShow=!1,f.closeDialog(this.dialog,e)},t}(a)},function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=o(2),s=o(1),l=o(15),c=o(14),f=o(11),d=o(12),u=o(7),p=o(4),h=o(3);o(21);e.exports=function(e){function t(o){i(this,t);var r=n(this,e.call(this));r.config=o;var a=document.createElement("div");return a.id="J_xiaomi_dialog",document.body.appendChild(a),a.style.zIndex=o["z-index"]||"999999",r.element=a,r.__initPosition(),r.__initColor(),o.undraggable?r.draggable={wrapClickFunc:function(e){return e}}:r.draggable=new u(r.element,".dialog-fake-mask"),r.dialog=new d(r,o),r.__initLayout(),r.bindEvent(),r.dialog.on("closeDialog",function(){r.weak&&r.weak.toggleActive()}),r}return r(t,e),t.prototype.bindEvent=function(){var e=this,t=this.config.type;this.on("openDialog",function(){e.__openAlicareDialog()}),this.on("closeDialog",function(){e.__closeAlicareDialog()}),this.on("message",function(t){e.dialog.dialogShow||e.__openAlicareDialog(t)}),this.on("toggleDialog",function(){e.__toggleDialog({type:t})}),this.once("closeStrong",function(){e.dialog.dialogShow?e.__closeAlicareDialog(function(){e.__changeEnvironment()}):e.__changeEnvironment()})},t.prototype.__initPosition=function(){var e=this.config,t={};if(e.position){for(var o in e.position)if(["left","right","top","bottom"].indexOf(o)!==-1){var i=e.position[o];("number"==typeof i||/%$/g.test(i+""))&&(t[o]=i)}}else if(e.container&&e.container.selector){var n=document.querySelector(e.container.selector),r=n.getBoundingClientRect(),a="left"===e.container.align?"right":"left";if(t[a]=r[a]+("left"===a?r.width:0),e.offset||e.container.offset){var s=e.offset||e.container.offset;"number"==typeof s.x&&("number"==typeof t.left?t.left+=s.x:t.right-=s.x),"number"==typeof s.y&&("number"==typeof t.top?t.top+=s.y:t.bottom-=s.y)}}t.left||t.right||(t.right=40),t.top||t.bottom||(t.bottom=50);for(var l in t){var c=t[l];"number"==typeof c?this.element.style[l]=c+"px":/%$/g.test(c+"")&&(this.element.style[l]=c)}},t.prototype.__initColor=function(){var e=this.config.color||"#f7931e",t="#J_xiaomi_dialog .J_weak:hover {\n            border-color: "+e+";\n            color: "+e+"; }\n        #J_xiaomi_dialog .J_weak.active {\n            border-color: "+e+";\n            background-color: "+e+"; }\n        #J_xiaomi_dialog .J_weak .xiaomi-avatar {\n            color: "+e+"; }\n        #J_xiaomi_dialog .J_strong .card .header {\n            background-color: "+e+"; }\n        #J_xiaomi_dialog .J_strong .close-icon {\n            background-color: "+e+"; }",o=document.createElement("style");o.setAttribute("type","text/css");var i=document.getElementsByTagName("style");i[i.length-1].parentNode.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.innerHTML=t},t.prototype.__initLayout=function(){var e=this.config.type,t=this.config.recommendQuestions;switch(e){case"strong":t?this.__initStrong():this.__initWeak();break;case"customized":this.__initCustomized();break;case"weak":default:this.__initWeak()}},t.prototype.__initWeak=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.weak=new l(this,e),this.layout=this.weak.element,h.sendLog({d:"init_weak"})},t.prototype.__initStrong=function(){this.strong=new c(this),this.layout=this.strong.element,h.sendLog({d:"init_strong"})},t.prototype.__initCustomized=function(){this.customized=new f(this,this.config),this.layout=this.customized.element,h.sendLog({d:"init_customized"})},t.prototype.__changeEnvironment=function(){var e=this;this.weak||this.__initWeak({active:this.dialog.dialogShow,environmentChanged:!0}),p.changeEnvironment(this.strong.element,this.weak.element,this.element,function(){s.remove(e.strong.element),delete e.strong})},t.prototype.__openAlicareDialog=function(e){switch(this.config.type){case"strong":h.sendLog({d:"open_dialog_strong"});break;case"customized":h.sendLog({d:"open_dialog_customized"});break;case"weak":default:h.sendLog({d:"open_dialog_weak"})}this.dialog.show(e)},t.prototype.__closeAlicareDialog=function(e){h.sendLog({d:"close_dialog"}),this.dialog.hide(e)},t.prototype.__toggleDialog=function(e){this.dialog.dialogShow?this.__closeAlicareDialog():this.__openAlicareDialog()},t}(a)},function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=o(2),s=o(1),l=o(3),c=o(18);e.exports=function(e){function t(o){i(this,t);var r=n(this,e.call(this));r.element=s.HtmlToDom(c);for(var a="",l=o.config.recommendQuestions,f=l.length,d=0;d<f&&d<5;d++)a+='<li data-id="'+l[d].knowledgeId+'" data-index="'+(d+1)+'">'+l[d].question+"</li>";var u=r.element.querySelector("ul");return u.innerHTML=a,o.element.insertBefore(r.element,o.dialog.element),r.container=o,r.__bindEvents(),r}return r(t,e),t.prototype.__bindEvents=function(){var e=this,t=this.element.querySelector(".close-icon");s.bindEvent(t,"click",this.container.draggable.wrapClickFunc(function(){l.sendLog({d:"change_environment"}),e.container.emit("closeStrong")}));for(var o=this.element.querySelectorAll(".card ul li"),i=function(t){var i=o[t];s.bindEvent(i,"click",e.container.draggable.wrapClickFunc(function(t){var o=t.currentTarget;l.sendLog({d:"click_question",ext:{index:o.dataset.index,knowledgeId:o.dataset.id,forecast:e.container.config.forecast||1}}),e.container.emit("message",i.innerHTML)}))},n=0;n<o.length;++n)i(n);var r=this.element.querySelector(".card .consult a");s.bindEvent(r,"click",this.container.draggable.wrapClickFunc(function(){e.container.emit("toggleDialog")}))},t}(a)},function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=o(2),s=o(1),l=o(19);e.exports=function(e){function t(o,r){i(this,t);var a=n(this,e.call(this));return a.element=s.HtmlToDom(l),o.element.insertBefore(a.element,o.dialog.element),a.container=o,a.__bindEvents(),r.active&&s.addClass(a.element,"active"),a}return r(t,e),t.prototype.toggleActive=function(){s.hasClass(this.element,"active")?s.removeClass(this.element,"active"):s.addClass(this.element,"active")},t.prototype.__bindEvents=function(){var e=this;s.bindEvent(this.element,"click",this.container.draggable.wrapClickFunc(function(){s.hasClass(e.element,"active")?(s.removeClass(e.element,"active"),e.container.emit("closeDialog")):(s.addClass(e.element,"active"),e.container.emit("openDialog"))}))},t}(a)},function(e,t,o){t=e.exports=o(5)(),t.push([e.id,'@font-face{font-family:alicare-dialog-iconfont;src:url("//at.alicdn.com/t/font_1471933726_7338545.eot");src:url("//at.alicdn.com/t/font_1471933726_7338545.eot?#iefix") format("embedded-opentype"),url("//at.alicdn.com/t/font_1471933726_7338545.woff") format("woff"),url("//at.alicdn.com/t/font_1471933726_7338545.ttf") format("truetype"),url("//at.alicdn.com/t/font_1471933726_7338545.svg#iconfont") format("svg")}.alicare-dialog-iconfont{font-family:alicare-dialog-iconfont;font-size:16px;font-style:normal;line-height:normal;-webkit-font-smoothing:antialiased}#J_xiaomi_dialog{position:fixed}#J_xiaomi_dialog .J_weak{background-color:#fff;width:56px;text-align:center;padding:8px 0;border:2px solid #f5f5f5;border-radius:4px;color:#b7b7b7;cursor:pointer}#J_xiaomi_dialog .J_weak:hover{border-color:#f7931e;color:#f7931e}#J_xiaomi_dialog .J_weak.active{border-color:#f7931e;background-color:#f7931e;color:#fff}#J_xiaomi_dialog .J_weak.active .xiaomi-avatar,#J_xiaomi_dialog .J_weak.active:hover{color:#fff}#J_xiaomi_dialog .J_weak .xiaomi-avatar{margin-bottom:4px;height:32px;font-size:30px;color:#f7931e}#J_xiaomi_dialog .J_weak p{font-size:14px;margin:0;height:17px}#J_xiaomi_dialog .J_weak p:first-of-type{position:relative;left:3px}#J_xiaomi_dialog .J_strong{width:150px;position:relative}#J_xiaomi_dialog .J_strong .xiaomi-body{background-image:url("//img.alicdn.com/tps/TB1eua9LXXXXXa7aFXXXXXXXXXX-245-66.png");width:45px;height:36px;position:absolute;right:0;top:-27px}#J_xiaomi_dialog .J_strong .card{background-color:#f9f9f9;border-radius:4px;overflow:hidden;position:relative}#J_xiaomi_dialog .J_strong .card .header{background-color:#f7931e;text-align:center;color:#fff;font-size:12px;padding:11px 0 5px;margin:0}#J_xiaomi_dialog .J_strong .card .header span{font-size:18px}#J_xiaomi_dialog .J_strong .card ul{list-style:none;margin:0;padding:3px 7px;font-size:12px}#J_xiaomi_dialog .J_strong .card ul li{border-bottom:1px solid #ddd;padding:0 8px 1px;line-height:24px;width:100%;box-sizing:border-box;overflow:hidden;max-height:48px;cursor:pointer}#J_xiaomi_dialog .J_strong .card ul li:hover{background-color:#fff}#J_xiaomi_dialog .J_strong .card .consult{text-align:center;font-size:14px;margin:0;padding:8px 0}#J_xiaomi_dialog .J_strong .card .consult a{color:#34bbf9;cursor:pointer}#J_xiaomi_dialog .J_strong .card .consult span{vertical-align:middle;display:inline-block}#J_xiaomi_dialog .J_strong .card .consult .talk-icon{margin-left:7px;background-image:url("//img.alicdn.com/tps/TB1eua9LXXXXXa7aFXXXXXXXXXX-245-66.png");width:15px;height:16px;background-position:-230px 0}#J_xiaomi_dialog .J_strong .close-icon{background:#f7931e url("//img.alicdn.com/tps/TB1aEnhMVXXXXXRapXXXXXXXXXX-16-16.png");border-radius:50%;width:16px;height:16px;position:absolute;right:-8px;top:-8px;cursor:pointer}#J_xiaomi_dialog .J_strong .xiaomi-dialog{width:64px;height:34px;background-position:-150px 0;left:16px;top:-39px}#J_xiaomi_dialog .J_strong .xiaomi-dialog,#J_xiaomi_dialog .J_strong .xiaomi-header{background-image:url("//img.alicdn.com/tps/TB1eua9LXXXXXa7aFXXXXXXXXXX-245-66.png");position:absolute}#J_xiaomi_dialog .J_strong .xiaomi-header{width:49px;height:66px;background-position:-45px 0;right:14px;top:-59px}#J_xiaomi_dialog .J_Dialog{position:absolute;overflow:hidden;display:none;padding:8px;width:724px;height:554px;left:-728px;bottom:-8px}#J_xiaomi_dialog .J_Dialog .alicare-dialog-wrapper{position:absolute;overflow:hidden;border:2px solid #ddd;border-radius:10px 10px 10px 0;box-shadow:0 2px 6px 0 rgba(0,0,0,.3)}#J_xiaomi_dialog .J_Dialog .alicare-dialog-wrapper .fake-header{position:absolute;top:0;width:100%;height:60px}#J_xiaomi_dialog .J_Dialog .alicare-dialog-wrapper .fake-header .im-close{position:absolute;top:19px;left:680px;cursor:pointer}#J_xiaomi_dialog .J_Dialog .alicare-dialog-wrapper .fake-header .im-close img{display:block;width:21px}#J_xiaomi_dialog .J_Dialog .alicare-dialog-wrapper iframe{display:block;border:none}#J_xiaomi_dialog .J_Dialog .alicare-dialog-wrapper .dialog-fake-mask{background:transparent;width:100%;height:100%;position:absolute;top:0;left:0;visibility:hidden}',""])},function(e,t){e.exports="<div class=J_Dialog><div class=alicare-dialog-wrapper><div class=dialog-fake-mask></div><div class=fake-header><a class=im-close><img src=//img.alicdn.com/tps/TB1NHW2LpXXXXXlXFXXXXXXXXXX-21-21.png></a></div><iframe width=720 height=550 name=alicare-dialog></iframe></div></div>"},function(e,t){e.exports="<div class=J_strong><div class=xiaomi-body></div><div class=card><p class=header>有问题？找<span>小蜜</span>哦~</p><ul></ul><p class=consult><a><span>咨询小蜜</span><span class=talk-icon></span></a></p></div><span class=close-icon></span><div class=xiaomi-dialog></div><div class=xiaomi-header></div></div>"},function(e,t){e.exports='<div class=J_weak><div class="xiaomi-avatar alicare-dialog-iconfont">&#xe61b;</div><p>有问题？</p><p>找小蜜</p></div>'},function(e,t,o){function i(e,t){for(var o=0;o<e.length;o++){var i=e[o],n=p[i.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](i.parts[r]);for(;r<i.parts.length;r++)n.parts.push(c(i.parts[r],t))}else{for(var a=[],r=0;r<i.parts.length;r++)a.push(c(i.parts[r],t));p[i.id]={id:i.id,refs:1,parts:a}}}}function n(e){for(var t=[],o={},i=0;i<e.length;i++){var n=e[i],r=n[0],a=n[1],s=n[2],l=n[3],c={css:a,media:s,sourceMap:l};o[r]?o[r].parts.push(c):t.push(o[r]={id:r,parts:[c]})}return t}function r(e,t){var o=m(),i=_[_.length-1];if("top"===e.insertAt)i?i.nextSibling?o.insertBefore(t,i.nextSibling):o.appendChild(t):o.insertBefore(t,o.firstChild),_.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");o.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=_.indexOf(e);t>=0&&_.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",r(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",r(e,t),t}function c(e,t){var o,i,n;if(t.singleton){var r=y++;o=v||(v=s(t)),i=f.bind(null,o,r,!1),n=f.bind(null,o,r,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(o=l(t),i=u.bind(null,o),n=function(){a(o),o.href&&URL.revokeObjectURL(o.href)}):(o=s(t),i=d.bind(null,o),n=function(){a(o)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}function f(e,t,o,i){var n=o?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,n);else{var r=document.createTextNode(n),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function d(e,t){var o=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}function u(e,t){var o=t.css,i=t.sourceMap;i&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");
var n=new Blob([o],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(n),r&&URL.revokeObjectURL(r)}var p={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},g=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=h(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,y=0,_=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=g()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var o=n(e);return i(o,t),function(e){for(var r=[],a=0;a<o.length;a++){var s=o[a],l=p[s.id];l.refs--,r.push(l)}if(e){var c=n(e);i(c,t)}for(var a=0;a<r.length;a++){var l=r[a];if(0===l.refs){for(var f=0;f<l.parts.length;f++)l.parts[f]();delete p[l.id]}}}};var b=function(){var e=[];return function(t,o){return e[t]=o,e.filter(Boolean).join("\n")}}()},function(e,t,o){var i=o(16);"string"==typeof i&&(i=[[e.id,i,""]]);o(20)(i,{});i.locals&&(e.exports=i.locals)}]);