/*! fixtool 2013-09-23 */
KISSY.add("tbc/fixtool/1.1.0/index",function(a,b,c,d,e,f){var g=d.all;return{config:{fixtoolNode:null,defaultTpl:{hd:'<div id="J_TbcFixtool" class="tbc-fixtool">',ft:"</div>",feedback:'<a class="tbc-fixtool-box tbc-fixtool-feedback" href="#" id="J_TbcFixtool_Feedback" target="_blank"><span class="tbc-fixtool-small">\u63d0\u5efa\u8bae</span><span class="tbc-fixtool-large">\u610f\u89c1<br>\u53cd\u9988</span></a>',gotop:'<a class="tbc-fixtool-box tbc-fixtool-gotop tbc-fixtool-hidden" href="#" id="J_TbcFixtool_Gotop"><span class="tbc-fixtool-small">\u56de\u9876\u90e8</span><span class="tbc-fixtool-large">\u56de\u5230<br>\u9876\u90e8</span></a>'},onlyLarge:!1,onlySmall:!1,only990:!1,only1280:!1,feedbackUrl:"#",fixtoolClass:"",feedbackClass:"",gotopClass:"",useFeedback:!0,useGotop:!0,useGotopAnim:!0,fixtoolBgColor:"white"},init:function(a){var b=this;b._mergeConfig(a),b._createDom(b._getHtml()),b._chooseClass(),b._initGotop(),b._initFeedback()},_mergeConfig:function(b){var c=this;window.g_config||(window.g_config={}),window.g_config.tbcFixtoolConfig||(window.g_config.tbcFixtoolConfig={}),c.config=a.merge(c.config,b,window.g_config.tbcFixtoolConfig)},_chooseClass:function(){var a=this;a.config.onlySmall?a.config.fixtoolNode.addClass("tbc-fixtool-onlySmall"):a.config.onlyLarge&&a.config.fixtoolNode.addClass("tbc-fixtool-onlyLarge"),a.config.only990?a.config.fixtoolNode.addClass("tbc-fixtool-only990"):a.config.only1280&&a.config.fixtoolNode.addClass("tbc-fixtool-only1280"),"gray"==a.config.fixtoolBgColor&&a.config.fixtoolNode.addClass("tbc-fixtool-gray"),a.config.fixtoolClass&&a.config.fixtoolNode.addClass(a.config.fixtoolClass),a.config.feedbackClass&&g("#J_TbcFixtool_Feedback").addClass(a.config.feedbackClass),a.config.gotopClass&&g("#J_TbcFixtool_Gotop").addClass(a.config.gotopClass)},_getHtml:function(){var b=this,c="";return b.config.useFeedback&&(c+=b.config.defaultTpl.feedback),b.config.useGotop&&(c+=b.config.defaultTpl.gotop),a.each(b.config.addItem,function(a){"last"==a.place?c+=a.html:c=a.html+c}),c=b.config.defaultTpl.hd+c+b.config.defaultTpl.ft},_createDom:function(a){var b=this;g("body").append(a),b.config.fixtoolNode=g("#J_TbcFixtool")},_initGotop:function(){var a=this;a.config.useGotopAnim&&g("#J_TbcFixtool_Gotop").on("click",function(a){a.halt();var b=f("html",{scrollTop:"0"},.2,"easeOut");b.run();var c=f("body",{scrollTop:"0"},.2,"easeOut");c.run()}),c.get("#J_TbcFixtool_Gotop")&&b.on(window,"scroll resize",function(){c.scrollTop()>c.viewportHeight()&&g("#J_TbcFixtool_Gotop").hasClass("tbc-fixtool-hidden")?g("#J_TbcFixtool_Gotop").removeClass("tbc-fixtool-hidden"):c.scrollTop()<c.viewportHeight()&&!g("#J_TbcFixtool_Gotop").hasClass("tbc-fixtool-hidden")&&g("#J_TbcFixtool_Gotop").addClass("tbc-fixtool-hidden")})},_initFeedback:function(){var a=this;g("#J_TbcFixtool_Feedback")&&g("#J_TbcFixtool_Feedback").attr("href",a.config.feedbackUrl)}}},{requires:["event","dom","node","ua","anim","xtemplate"]});