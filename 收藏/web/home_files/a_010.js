KISSY.add("tbc/add-to-cart/1.2.5/index",["io"],function(a,b,c,d){function e(b,c,d){var e="tbc/add-to-cart/";b&&(e+=b+"/"),a.use(e+"index.css"),a.use(e+"plugin/add2cart",function(a,b){b(c,d)})}function f(b,c){var d=b.split("."),e=c.split("."),f=!0;return a.each(e,function(a,b){return a<d[b]?(f=!1,!1):void 0}),f?c:b}function g(){var a="1.2.1";if(d&&d.name){var b=/\/(\d+\.\d+\.\d+)\//.exec(d.name);b&&b[1]?a=b[1]:"tbc/add-to-cart/index"===d.name&&(a="")}return a}var h=a.getLogger("cart");d.exports={init:function(a,c){var d=b("io"),i=g();h.info('request tms for "switcher"'),new d({url:"//www.taobao.com/go/rgn/cart/config.php",type:"get",cache:!1,timeout:2,dataType:"jsonp",success:function(b){b.add2cart!==!1?(b.add2cart&&b.add2cart.match(/\d+\.\d+\.\d+/)&&(i=f(i,b.add2cart)),e(i,a,c)):h.info("plugin disabled.")},error:function(){e(i,a,c)}})}}});